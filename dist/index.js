'use strict';var _fs=require('fs');var _fs2=_interopRequireDefault(_fs);var _path=require('path');var _path2=_interopRequireDefault(_path);var _http=require('http');var _http2=_interopRequireDefault(_http);var _swaggerTools=require('swagger-tools');var _swaggerTools2=_interopRequireDefault(_swaggerTools);var _jsYaml=require('js-yaml');var _jsYaml2=_interopRequireDefault(_jsYaml);var _connect=require('connect');var _connect2=_interopRequireDefault(_connect);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var app=(0,_connect2.default)();var serverPort=3000;// swaggerRouter configuration
var options={swaggerUi:_path2.default.join(__dirname,'/swagger.json'),controllers:_path2.default.join(__dirname,'./controllers'),useStubs:process.env.NODE_ENV==='development'// Conditionally turn on stubs (mock mode)
};// The Swagger document (require it, build it programmatically, fetch it from a URL, ...)
console.log(_path2.default.join(__dirname,'api/swagger.yaml'));var spec=_fs2.default.readFileSync(_path2.default.join(__dirname,'api/swagger.yaml'),'utf8');var swaggerDoc=_jsYaml2.default.safeLoad(spec);// Initialize the Swagger middleware
_swaggerTools2.default.initializeMiddleware(swaggerDoc,function(middleware){// Interpret Swagger resources and attach metadata to request - must be first in swagger-tools middleware chain
app.use(middleware.swaggerMetadata());// Validate Swagger requests
app.use(middleware.swaggerValidator());// Route validated requests to appropriate controller
app.use(middleware.swaggerRouter(options));// Serve the Swagger documents and Swagger UI
app.use(middleware.swaggerUi());// Start the server
_http2.default.createServer(app).listen(serverPort,function(){console.log('Your server is listening on port %d (http://localhost:%d)',serverPort,serverPort);console.log('Swagger-ui is available on http://localhost:%d/docs',serverPort)})});